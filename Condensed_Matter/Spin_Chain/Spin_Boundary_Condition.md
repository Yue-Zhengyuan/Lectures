<style>
    .katex {
        font-size: 1.1em;
    }
    .remark {
        border-radius: 15px;
        padding: 20px;
        background-color: SeaGreen;
        color: White;
    }
    .result {
        border-radius: 15px;
        padding: 20px;
        background-color: DarkSlateBlue;
        color: White;
    }
</style>

# Boundary Conditions of Spin Chains

<div class="remark">

*Notation notes*: 

- The Pauli matrices will be denoted by both $(X_i, Y_i, Z_i)$ and $(\sigma_i^x, \sigma_i^y, \sigma_i^z)$.
- Spin-1/2 operators are denoted by $S^a = \sigma^a/2 \ (a=x,y,z)$.
- The chain sites will be labelled periodically for both boundary conditions, i.e. any one-site operator $O_j$ satisfy
    $$
    O_{j+N} = O_j \qquad j = 1,...,N
    $$

</div><br>

**Periodic boundary condition (PBC)** can intuitively be applied to any spin chain. However, the **anti-periodic boundary condition (APBC)** can only be defined on spin chains with *on-site* $\mathbb{Z}_2$ symmetry (symmetry with respect to the flip of all spins).

In the following we only consider spin chains with local interactions. This means that the Hamiltonian of the chain is a sum of local terms: the PBC version is simply ($N$ is the number of sites)

$$
H^P = \sum_{j=1}^N H_j
$$

where $H_j$ covers sites $j,...,j+n$ (nearest-$n$-neighbor interaction; usually $n = 1,2$). If we simply write $H$, we refer to the PBC Hamiltonian unless otherwise stated.

## On-Site $\mathbb{Z}_2$ Symmetry

The on-site $\mathbb{Z}_2$ symmetry means that each local term $H_j$ (and therefore the whole $H$) is invariant under the transformation

$$
Z^\dagger H_j Z = H_j
\ \Rightarrow \ 
Z^\dagger H Z = H
$$

where $Z$ is the $\mathbb{Z}_2$ transformation **generator**

$$
Z = \prod_{j=1}^N Z_j, \qquad
Z_j = Z_j^\dagger = Z_j^{-1}
$$

Here $Z_j$ is an operator acting on site $j$ *only* (hence the *on-site* requirement). 

### Transformation of Spin-1/2 Operators

Usually the on-site operator is just the Pauli matrix $Z_j$, thus we shall not use an alternative symbol for the more general $\mathbb{Z}_2$ generator. The $X_j, Y_j$ operators transforms under the on-site $\mathbb{Z}_2$ symmetry (generated by $Z_j$ alone) as

$$
Z_j^\dagger X_j Z_j = -X_j, \quad Z_j^\dagger Y_j Z_j = -Y_j
$$

Therefore, the spin ladder operators $S^\pm_j = (X_j \pm iY_j)/2$ also transform as

$$
Z_j^\dagger S^\pm_j Z_j = - S^\pm_j
$$

## (Twisted) Translation and (Anti-)PBC

The PBC can be more formally represented by introducing the **lattice translation operator** $T$, which can be regarded as a (unitary) change of basis, i.e. relabelling of sites. Its action of on any local spin operators $O_j$ is defined as

$$
T^\dagger O_j T = O_{j+1}
$$

For APBC, we need a **twisted** version of translation operator 

$$
\tilde{T} \equiv T Z_1 
\quad (\text{\textit{First} twist, \textit{then} translate})
$$

We can then define the PBC and the APBC Hamiltonians as

<div class="result">

**PBC/APBC Hamiltonian:**

$$
\begin{align*}
    H^P &= \sum_{j=1}^N H^P_j, &\quad
    H^P_j &\equiv (T^\dagger)^{j-1} 
    H_1 T^{j-1} (= H_j)
    \\
    H^A &= \sum_{j=1}^N H^A_j, &\quad
    H^A_j &\equiv (\tilde{T}^\dagger)^{j-1} 
    H_1 \tilde{T}^{j-1}
\end{align*}
$$

</div><br>

### Explicit Expression of $H^A$

- Obviously $H^A_1 = H_1$

- For $2 \le j \le N-n$ (the translation operator $T$ should be treated carefully)

    $$
    \begin{align*}
        H_j^A &= (Z_1 T^\dagger)^{j-1} H_1 (T Z_1)^{j-1}
        \\
        &= (Z_1 T^\dagger)^{j-2} Z_1 T^\dagger H_1 T Z_1 (T Z_1)^{j-2}
        \\
        &= (Z_1 T^\dagger)^{j-2} Z_1 H_2 Z_1 (T Z_1)^{j-2}
        \\
        &= (Z_1 T^\dagger)^{j-3} Z_1 Z_2 H_3 Z_2 Z_1 (T Z_1)^{j-3}
        \\ & \,\,\, \vdots \\
        &= Z_1 \cdots Z_{j-1} H_j Z_{j-1} \cdots Z_1
    \end{align*}
    $$

    Since $H_j$ only covers sites $j$ to $j+n$, it commutes with the string of $Z_j$'s. Thus

    $$
    H^A_j = H_j \qquad (2 \le j \le N-1)
    $$

- For $N-n+1 \le j \le N$ (the **boundary terms**), not all $Z_j$'s cancel out. In general

    $$
    H^A_{N-m} = Z_1 \cdots Z_{n-m} H_{N-m} Z_{n-m} \cdots Z_1 \qquad
    (m = n-1,...,0)
    $$

    For example, if we only have nearest neighbor interaction (n = 1), then the only boundary term is $H_N$ (m = 0):

    $$
    H^A_N = Z_1 H_N Z_1
    $$

Therefore $H^A$ and $H^P$ *only differ in the $n$ boundary terms*.

### Twist-Translation Along the Whole Chain

Obviously the original translation along the whole chain is just identity ($T^N = 1$). In contrast, the twist-translation along the whole chain is equivalent to a $\mathbb{Z}_2$ transform:

$$
\tilde{T}^N = Z
$$

----

*Proof*: For any local operator $O_j$

$$
\begin{align*}
    (\tilde{T}^\dagger)^N O_j \tilde{T}^N 
    &= (Z_1 T^\dagger)^{N-1} Z_1 T^\dagger O_j T Z_1 (T Z_1)^{N-1} \\
    &= (Z_1 T^\dagger)^{N-1} Z_1 O_{j+1} Z_1 (T Z_1)^{N-1} \\
    &= (Z_1 T^\dagger)^{N-2} Z_1 Z_2 O_{j+2} Z_2 Z_1 (T Z_1)^{N-2} 
    \\ &\,\,\, \vdots \\
    &= Z_1 \cdots Z_N \underbrace{O_{j+N}}_{=O_j} Z_N \cdots Z_1 
    = Z^\dagger O_j Z
\end{align*}
$$

The arbitrariness of $O_j$ then implies $\tilde{T}^N = Z$. $\blacksquare$

----

<div class="remark">

*Remark*: When the on-site $\mathbb{Z}_2$ generator is just the $Z_j$ operator, the Pauli matrices are transformed to

$$
(\tilde{T}^\dagger)^N X_j \tilde{T}^N = -X_j, \quad 
(\tilde{T}^\dagger)^N Y_j \tilde{T}^N = -Y_j, \quad 
(\tilde{T}^\dagger)^N Z_j \tilde{T}^N = +Z_j
$$

</div><br>

## General Properties of APBC Hamiltonian

- $H^A$ is invariant under the twisted translation.

    ----

    *Proof*: Applying a $\tilde{T}$ translation, we obtain

    $$
    \tilde{T}^\dagger H^A \tilde{T} 
    = \sum_{j=1}^{N} H^A_{j+1}
    = \sum_{j=2}^{N+1} H^A_j
    $$

    Thus it suffices to show that $H^A_{N+1} = H^A_1$. Due to the $\mathbb{Z}_2$ symmetry, and $H_{N+1} = H_1$, we have

    $$
    \begin{align*}
        H^A_{N+1} &= Z_1 \cdots Z_N H_{N+1} Z_N \cdots Z_1 \\
        &= Z_N \cdots Z_1 H_1 Z_1 \cdots Z_N \\
        &= Z^\dagger H_1 Z = H_1 = H^A_1 \qquad \blacksquare
    \end{align*}
    $$

    ----

- $H^A$ also has $\mathbb{Z}_2$ symmetry generated by the same $Z$ as $H^P$. 

    ----

    *Proof*: For simplicity, we prove models including nearest neighbor interactions only ($n = 1$). It suffices to examine the boundary term $H_N$, which cover sites $N, 1$ only:

    $$
    \begin{align*}
        Z^\dagger H^A_N Z &= Z^\dagger Z_1 H_N Z_1 Z \\
        &= Z_N H_N Z_N
        \xlongequal{\text{almost always}} H^A_N
    \end{align*}
    $$

    By "almost always" we mean "for most common spin chains". $\blacksquare$

    ----
